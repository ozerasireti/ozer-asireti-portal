<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Özer Aşireti | Giriş Kapısı</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #0a192f; color: white; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .box { background: white; color: #333; padding: 30px; border-radius: 15px; width: 90%; max-width: 350px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h2 { color: #b30000; margin-bottom: 20px; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 25px; box-sizing: border-box; }
        .btn { width: 100%; padding: 12px; border-radius: 25px; border: none; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.3s; }
        .btn-reg { background: #1b5e20; color: white; }
        .btn-log { background: #0a192f; color: white; }
        .link { font-size: 13px; color: #b30000; cursor: pointer; margin-top: 15px; display: block; text-decoration: underline; }
    </style>
</head>
<body>

<div class="box">
    <h2 id="baslik">ÜYE KAYDI</h2>
    <p id="bilgi" style="font-size:12px;">E-postanıza onay linki gönderilecektir.</p>
    
    <input type="email" id="email" placeholder="E-posta">
    <input type="password" id="pass" placeholder="Şifre">
    
    <button id="islemBtn" class="btn btn-reg" onclick="baslat()">KAYIT OL & ONAY GÖNDER</button>
    <span class="link" id="degistir" onclick="modDegis()">Zaten üyeyim, Giriş Yap</span>
    <p id="sonuc" style="font-size:12px; margin-top:10px; font-weight:bold;"></p>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

<script>
    const config = {
        apiKey: "AIzaSyBJJEJO1FJCvPMF7n5LXX4DYrf3jBEvTlI",
        authDomain: "ozer-asireti-portal.firebaseapp.com",
        projectId: "ozer-asireti-portal",
        storageBucket: "ozer-asireti-portal.firebasestorage.app",
        messagingSenderId: "76823168812",
        appId: "1:76823168812:web:e21ab7461ac3eec81b4e89"
    };
    firebase.initializeApp(config);

    let girisModu = false;

    function modDegis() {
        girisModu = !girisModu;
        document.getElementById('baslik').innerText = girisModu ? "GİRİŞ YAP" : "ÜYE KAYDI";
        document.getElementById('islemBtn').innerText = girisModu ? "GİRİŞ YAP" : "KAYIT OL & ONAY GÖNDER";
        document.getElementById('islemBtn').className = girisModu ? "btn btn-log" : "btn btn-reg";
        document.getElementById('degistir').innerText = girisModu ? "Hesabın yok mu? Kayıt Ol" : "Zaten üyeyim, Giriş Yap";
    }

    function baslat() {
        const email = document.getElementById('email').value;
        const pass = document.getElementById('pass').value;
        const s = document.getElementById('sonuc');

        if(girisModu) {
            firebase.auth().signInWithEmailAndPassword(email, pass)
            .then((u) => {
                if(u.user.emailVerified) { window.location.href = "meydan.html"; }
                else { s.style.color="orange"; s.innerText="Önce e-postanı onaylamalısın!"; }
            })
            .catch(e => { s.style.color="red"; s.innerText="Hata: " + e.message; });
        } else {
            firebase.auth().createUserWithEmailAndPassword(email, pass)
            .then((u) => {
                u.user.sendEmailVerification().then(() => {
                    s.style.color="green"; s.innerText="Onay maili gönderildi! Linke tıklayıp sonra giriş yapın.";
                });
            })
            .catch(e => { s.style.color="red"; s.innerText="Hata: " + e.message; });
        }
    }
</script>
</body>
</html>
