<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Özer Aşireti | Dijital Meydan</title>
    <style>
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #e5e7eb; }
        .stripes { position: fixed; top: 0; width: 100%; z-index: 1000; }
        .s-r { background: #b30000; height: 8px; }
        .s-w { background: #fff; height: 6px; }
        .s-g { background: #1b5e20; height: 6px; }

        .header { background: #0a192f; color: white; padding: 45px 20px 15px; text-align: center; border-bottom: 3px solid #ffd700; }
        .container { max-width: 800px; margin: 20px auto; padding: 20px; display: none; } /* Şifresiz girişler için gizli */
        
        .chat-box { background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); height: 500px; display: flex; flex-direction: column; }
        .messages { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; background: #f9fafb; }
        
        .msg { background: white; padding: 12px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border-left: 4px solid #1b5e20; max-width: 85%; }
        .msg b { color: #0a192f; display: block; font-size: 13px; }

        .input-area { padding: 15px; background: white; border-top: 1px solid #eee; display: flex; gap: 10px; border-radius: 0 0 15px 15px; }
        input { padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none; flex: 1; }
        .btn { background: #b30000; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <script>
        // KAPIDAKİ NÖBETÇİ: Şifre girmeyeni içeri alma!
        if(localStorage.getItem('asiret_izin') !== 'verildi') {
            window.location.href = "kayit.html";
        }
    </script>

    <div class="stripes"><div class="s-r"></div><div class="s-w"></div><div class="s-g"></div></div>
    <div class="header">
        <h2 style="margin:0;">AŞİRET DİJİTAL MEYDANI</h2>
        <a href="index.html" style="color:#ffd700; text-decoration:none; font-size:12px;">← ANA SAYFAYA DÖN</a>
    </div>

    <div class="container" id="meydanAlani" style="display:block;">
        <div class="chat-box">
            <div class="messages" id="chatArea">
                <div class="msg"><b>Sistem:</b> Meydan'a hoş geldiniz. Sadece aşiret üyeleri girebilir.</div>
            </div>
            <div class="input-area">
                <input type="text" id="userName" placeholder="Adınız" style="max-width: 100px;">
                <input type="text" id="userMsg" placeholder="Mesajınızı yazın...">
                <button class="btn" onclick="gonder()">GÖNDER</button>
            </div>
        </div>
    </div>

    <script>
        // Sayfa açıldığında hafızadaki eski mesajları getir
        window.onload = function() {
            const kayitli = JSON.parse(localStorage.getItem('asiret_mesajlar')) || [];
            kayitli.forEach(m => ekranaEkle(m.ad, m.msj));
        };

        function gonder() {
            const ad = document.getElementById('userName').value || "Üye";
            const msj = document.getElementById('userMsg').value;

            if(msj) {
                ekranaEkle(ad, msj);
                // Mesajı telefonun hafızasına kaydet (Silinmesin)
                const kayitli = JSON.parse(localStorage.getItem('asiret_mesajlar')) || [];
                kayitli.push({ad, msj});
                localStorage.setItem('asiret_mesajlar', JSON.stringify(kayitli));
                document.getElementById('userMsg').value = "";
            }
        }

        function ekranaEkle(ad, msj) {
            const alan = document.getElementById('chatArea');
            const div = document.createElement('div');
            div.className = 'msg';
            div.innerHTML = `<b>${ad}:</b> ${msj}`;
            alan.appendChild(div);
            alan.scrollTop = alan.scrollHeight;
        }
    </script>
</body>
</html>
